package me.xginko.aef.modules.elytra;

import me.xginko.aef.modules.AEFModule;
import me.xginko.aef.utils.LocationUtil;
import org.bukkit.Location;
import org.bukkit.entity.Player;
import org.bukkit.event.player.PlayerMoveEvent;

public class ElytraHelper extends AEFModule {

    public static final double SPEED_TOLERANCE = 0.02;
    private static ElytraHelper instance;

    public ElytraHelper() {
        super("elytra-helper");
        instance = this;
    }

    public static ElytraHelper getInstance() {
        return instance;
    }

    @Override
    public void enable() {
    }

    @Override
    public boolean shouldEnable() {
        return config.elytra_enable_at_spawn || config.elytra_enable_global || config.elytra_enable_netherceiling;
    }

    @Override
    public void disable() {
    }

    public double getBlocksPerTick(PlayerMoveEvent event) {
        return  config.elytra_calculate_3D ? LocationUtil.getRelDistance3D(event.getTo(), event.getFrom())
                : LocationUtil.getRelDistance2D(event.getTo(), event.getFrom());
    }

    public boolean isInNewChunks(Player player) {
        return player.getChunk().getInhabitedTime() <= 200L;
    }

    public Location getSetbackLocation(PlayerMoveEvent event) {
        return event.getFrom();
    }
}
