package me.xginko.aef.utils.tickdata;

import org.bukkit.Server;
import org.bukkit.plugin.java.JavaPlugin;

import java.time.Duration;

public interface CachedTickReports {

    double getGlobalTPS();
    double getTPS();
    double getGlobalMSPT();
    double getMSPT();

    static CachedTickReports create(JavaPlugin plugin, Duration cacheDuration) {
        try {
            Class.forName("io.papermc.paper.threadedregions.RegionizedServer");
            return new FoliaTickReports(cacheDuration);
        } catch (ClassNotFoundException ignored) {}

        try {
            Server.class.getMethod("getAverageTickTime");
            return new PaperTickReports(plugin, cacheDuration);
        } catch (NoSuchMethodException e) {
            return new LegacyTickReports(plugin, cacheDuration);
        }
    }
}